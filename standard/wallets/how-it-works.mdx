---
title: "How It Works"
---

import { Aside } from '/snippets/aside.jsx';

Wallets are often the entry point of any transaction flow in TON (TODO: link to external messages).

A wallet should not perform any action unless the initiator is the owner.
TON uses a public–private key pair for verification, and within the contract the [Ed25519](https://en.wikipedia.org/wiki/EdDSA#Ed25519) asymmetric signature scheme is used. Therefore, the contract must store the public key. 

<Aside type="caution" title="Important">
The public key is NOT the wallet address. The address is derived from the contract's StateInit and other parameters. (TODO: link to TON address formats)
</Aside>

An external message is sent to the contract (containing a 512‑bit signature and the desired payload). [Ed25519](https://en.wikipedia.org/wiki/EdDSA#Ed25519) verifies that the provided signature matches the hash of the message.

Since TON is public, anyone can see what was sent to the wallet and simply replay the transaction, which would allow transfers to go through without the owner’s consent — something we do not want. In TON, replay protection is typically implemented with a sequence number `seqno`, a variable that must be unique for every new transaction, so a previously sent message cannot be reused in a replay attack.
