---
title: "Set up full node (validator/liteserver) with MyTonCtrl"
description: "Step-by-step checklists for bringing a validator, liteserver, or archive liteserver online once MyTonCtrl is installed."
---

<Warning>**Handle validator keys like production secrets.** Keep recovery phrases offline, restrict shell access, and test new procedures on testnet before touching wallets that hold real stake.</Warning>

These runbooks assume you already reviewed hardware sizing and installer options in the [MyTonCtrl overview](./mytonctrl/overview). Follow the quick steps below to get a baseline node online, then jump to the role you need.

## Baseline setup (install and sync)

### 1. Install MyTonCtrl

Log in as the non-root operator that will manage the node, then install dependencies and run the official installer:

```bash
sudo apt update
sudo apt install -y curl wget git ca-certificates python3-pip
wget https://raw.githubusercontent.com/ton-blockchain/mytonctrl/master/scripts/install.sh
sudo bash install.sh -d
```

The `install.sh` script opens an interactive menu—follow the prompts to choose the network, enable modes, and confirm telemetry policies. Refer to the [MyTonCtrl overview](./mytonctrl/overview#install-mytonctrl) if you need a full flag reference for automated setups.

### 2. Confirm readiness before role-specific steps

- Use `status fast` command to check synchronization status. On synchronized node, `timeDiff` is near zero and `Local validator out of sync` stays below 20.
- Ensure validator wallets are funded and backed up.
- Capture `/var/ton-work/keys` and recent configs with `create_backup` so you can roll back if needed.

---

## Validator quickstart

**You need:** a synced node and funded validator wallet.

### Prepare the validator wallet (run once)

- Check whether a suitable wallet already exists with `wl`. Copy the address if you plan to reuse it.
- To create a new wallet for staking, generate one with `nw 0 validator_wallet v3 1001` (replace the name if you prefer another label). MyTonCtrl prints the fresh address so you can fund it.
- Deploy the wallet contract after funding by running `aw validator_wallet`. Repeat this command whenever you add new wallets that need activation.
- Point the validator module to the wallet so election tasks use it: `set validatorWalletName "validator_wallet"` and verify with `get validatorWalletName`.
- Back up the private key with `ew validator_wallet` and store it offline. See the [wallet command reference](./mytonctrl/wallet) for additional import/export options.

### 1. Switch the node into validator mode

Inside the MyTonCtrl console, enable the validator workflow:

```bash
MyTonCtrl> enable_mode validator
MyTonCtrl> mode_status
MyTonCtrl> about validator
```

Confirm that `mode_status` reports `validator` as active and note the `adnlPort` for your firewall rules.

### 2. Set the stake policy

Choose either a fixed Toncoin amount or a percentage of wallet balance:

```bash
MyTonCtrl> set stake 400000
# or
MyTonCtrl> set stakePercent 99
```

Use `get stake` and `get stakePercent` to review the current configuration before each election.

### 3. Run the election checklist

When an election window opens, work through the following sequence:

```bash
MyTonCtrl> status fast
MyTonCtrl> ve
MyTonCtrl> check_ef
```

- Wait until `Local validator out of sync` is below 20 before running `ve`; high values mean the node is not ready.
- Review `ve` output for submission status and `check_ef` for efficiency of the previous round.
- Add a cron job that calls `ve` and `check_ef` every 30 minutes during election weeks if you automate.

### 4. Monitor and maintain

- `status` or `status fast` surface sync and performance metrics—trigger alerts if `timeDiff` or `overloaded` values spike.
- Run `update` followed by `upgrade` during maintenance windows to apply MyTonCtrl and binary updates.
- Back up `/var/ton-work/keys` and any wallet exports after changes using `create_backup`.
- Keep a cold standby server ready; restore it with `restore_backup` if you need to fail over quickly.

---

## Liteserver quickstart

**You need:** a synced node with validator mode disabled.

### 1. Enable liteserver services

```bash
MyTonCtrl> enable_mode liteserver
MyTonCtrl> mode_status
```

`mode_status` should now list `liteserver` as active.

### 2. Configure with the installer

```bash
MyTonCtrl> installer
Installer> enable LS
Installer> plsc
Installer> exit
```

`LS` starts the liteserver daemon, and `plsc` prints the client configuration bundle. Use the generated `global-config.json` to connect lite clients over ADNL.

### 3. Lock down access and verify

- Restrict inbound access to the liteserver port with firewalls or a reverse proxy.
- Run `status fast` and watch CPU, RAM, and bandwidth metrics.
- Export fresh backups after configuration changes with `create_backup`.

---

## Archive liteserver quickstart

**You need:** liteserver mode enabled, enough NVMe storage (10–12 TB for long-term retention), and monitoring for disk growth.

### 1. Set archive retention arguments

```bash
MyTonCtrl> installer
Installer> set_node_argument --archive-ttl 0
Installer> set_node_argument --state-ttl 0
Installer> exit
```

`0` keeps data indefinitely. Use large but finite values (seconds) if you only need a rolling window.

### 2. Restart services when prompted

```bash
sudo systemctl restart validator
sudo systemctl restart mytoncore
```

### 3. Validate the setup

```bash
MyTonCtrl> status fast
MyTonCtrl> settings_status
```

- Confirm the archive arguments appear in `settings_status`.
- Monitor `/var/ton-work/db` consumption; plan for rapid growth and replicate snapshots offsite.
- Periodically run `create_backup` and test restores on a secondary machine to ensure recoverability.

Once these runbooks are complete, use the [MyTonCtrl core reference](./mytonctrl/core) for deeper configuration tasks.
