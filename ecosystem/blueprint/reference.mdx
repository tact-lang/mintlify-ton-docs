---
title: "Blueprint reference"
---

Blueprint provides a comprehensive CLI tool for TON smart contract development. This reference covers all available commands, options, configuration, and API methods.

## CLI commands

### `create`

Create a new contract with .fc source, .ts wrapper, .spec.ts test.

#### Interactive mode
```bash
npx blueprint create
```
Launches a guided prompt to create a contract step by step.

#### Non-interactive mode
```bash
npx blueprint create <CONTRACT> --type <TYPE>
```

**Parameters:**
- `<CONTRACT>` — Contract name in `CamelCase`
- `<TYPE>` — Template type

**Available template types:**
- `tolk-empty` — An empty contract (Tolk)
- `func-empty` — An empty contract (FunC)
- `tact-empty` — An empty contract (Tact)
- `tolk-counter` — A simple counter contract (Tolk)
- `func-counter` — A simple counter contract (FunC)
- `tact-counter` — A simple counter contract (Tact)

**Example:**
```bash
npx blueprint create MyNewContract --type tolk-empty
```

**Output:**
- Creates contract file in `contracts/` directory with appropriate extension
- Generates corresponding test file in `tests/` directory
- Creates deployment script in `scripts/` directory

### `build`

Builds a contract that has a .compile.ts file.

#### Interactive mode
```bash
npx blueprint build
```
Displays a list of contracts to select from.

#### Non-interactive mode
```bash
npx blueprint build <CONTRACT>
npx blueprint build --all
```

**Parameters:**
- `<CONTRACT>` — Specific contract name to build
- `--all` — Build all contracts in the project

**Examples:**
```bash
npx blueprint build MyNewContract
npx blueprint build --all
```

**Output:**
- [Compiled artifacts](/ecosystem/blueprint/develop#compiled-artifacts) stored in `build/` directory

### `run`

Runs a script from 'scripts' directory (e.g. a deploy script).

#### Interactive mode
```bash
npx blueprint run
```
Displays a list of available scripts to select from.

#### Non-interactive mode
```bash
npx blueprint run <SCRIPT> [args...]
```

**Parameters:**
- `<SCRIPT>` — Script name (without `.ts` extension)
- `[args...]` — Optional arguments passed to the script
- `--<NETWORK>` — Network selection (`mainnet`, `testnet`)
- `--<DEPLOY_METHOD>` — Deployment method (`tonconnect`, `mnemonic`)

**Network options:**
- `--mainnet` — Use TON Mainnet
- `--testnet` — Use TON Testnet
- `--custom <URL>` — Use custom network endpoint
- `--custom-version <VERSION>` — API version (`v2`, `v4`)
- `--custom-type <TYPE>` — Network type (`custom`, `mainnet`, `testnet`)
- `--custom-key <KEY>` — API key (v2 only)

**Deploy options:**
- `--tonconnect` — Use TON Connect for deployment
- `--deeplink` — Use deep link for deployment
- `--mnemonic` — Use mnemonic for deployment

**Explorer options:**
- `--tonscan` — Use Tonscan explorer
- `--tonviewer` — Use Tonviewer explorer (default)
- `--toncx` — Use Toncx explorer
- `--dton` — Use Dton explorer

**Examples:**
```bash
npx blueprint run deployCounter --mainnet --tonconnect
npx blueprint run deployCounter --testnet --mnemonic
npx blueprint run myScript arg1 arg2
```

**Custom network example:**
```bash
npx blueprint run deployContract \
  --custom https://toncenter.com/api/v2/jsonRPC \
  --custom-version v2 \
  --custom-type mainnet \
  --custom-key <YOUR_API_KEY>
```

**Requirements:**
- Scripts must be located in `scripts/` directory
- Script files must export a `run` function:

```typescript
export async function run(provider: NetworkProvider, args: string[]) {
  // Script implementation
}
```

### `test`

Run the full project test suite with all .spec.ts files.

#### Basic usage
```bash
npx blueprint test
```
Runs all test files in the `tests/` directory.

#### Gas reporting
```bash
npx blueprint test --gas-report
# or
npx blueprint test -g
```

Run tests and compare with the last snapshot's metrics.

#### Specific test file
```bash
npx blueprint test <CONTRACT_NAME>
```

**Examples:**
```bash
npx blueprint test
npx blueprint test MyContract
```

**Test file requirements:**
- Test files should be located in `tests/` directory
- Use `.spec.ts` or `.test.ts` extension
- Tests run in Sandbox environment for fast execution
- Supports standard Jest syntax and matchers

### `verify`

Verifies a deployed contract on verifier.ton.org.

#### Basic usage
```bash
npx blueprint verify
```
Interactive mode to select contract and network.

#### Non-interactive mode
```bash
npx blueprint verify <CONTRACT> --network <NETWORK>
```

**Parameters:**
- `<CONTRACT>` — Contract name to verify
- `--network <NETWORK>` — Network (`mainnet`, `testnet`)
- `--compiler-version <VERSION>` — Compiler version used for building
- `--custom <URL>` — Custom network endpoint
- `--custom-version <VERSION>` — API version (v2 default)
- `--custom-type <TYPE>` — Network type (`mainnet`, `testnet`)
- `--custom-key <KEY>` — API key (v2 only)

**Examples:**
```bash
npx blueprint verify MyContract --network mainnet
npx blueprint verify MyContract --network testnet --compiler-version 0.4.4-newops.1
```

**Custom network verification:**
```bash
npx blueprint verify MyContract \
  --custom https://toncenter.com/api/v2/jsonRPC \
  --custom-version v2 \
  --custom-type mainnet \
  --custom-key <YOUR_API_KEY> \
  --compiler-version 0.4.4-newops.1
```

### `help`

Shows more detailed help.

```bash
npx blueprint help
npx blueprint help <COMMAND>
```

**Examples:**
```bash
npx blueprint help
npx blueprint help create
npx blueprint help run
```

### `set`

Sets configuration values.

```bash
npx blueprint set <KEY> <VALUE>
```

**Available keys:**
- `func` — Overrides @ton-community/func-js-bin version

### `convert`

Converts legacy bash build scripts to Blueprint wrappers.

```bash
npx blueprint convert <PATH_TO_BUILD_SCRIPT>
```

### `rename`

Renames contract by matching in wrappers, scripts and tests.

```bash
npx blueprint rename <OLD_NAME> <NEW_NAME>
```

### `pack`

Builds and prepares a publish-ready package of wrappers.

```bash
npx blueprint pack
```

**Flags:**
- `--no-warn`, `-n` — Ignore warnings about modifying tsconfig.json, package.json, and removing the dist directory

**Output:**
- Creates deployment-ready package
- Includes compiled artifacts
- Bundles dependencies

### `snapshot`

Creates snapshots with gas usage and cells sizes.

```bash
npx blueprint snapshot
```

**Flags:**
- `--label=<comment>`, `-l=<comment>` — Add a comment label to the snapshot

**Features:**
- Run with gas usage and cells' sizes collected
- Write a new snapshot
- Useful for regression testing

## Environment variables

Blueprint supports environment variables for wallet configuration when using mnemonic provider:

- `WALLET_MNEMONIC` — Wallet mnemonic phrase (space-separated words)
- `WALLET_VERSION` — Wallet contract version (`v1r1`, `v1r2`, `v1r3`, `v2r1`, `v2r2`, `v3r1`, `v3r2`, `v4r1`, `v4r2`, `v4`, `v5r1`)
- `WALLET_ID` — Wallet ID (for versions below `v5r1`)
- `SUBWALLET_NUMBER` — Subwallet number (for `v5r1` wallets)

### Example .env file

```bash
WALLET_MNEMONIC="word1 word2 word3 ... word24"
WALLET_VERSION=v4
WALLET_ID=698983191
```

## API reference

Blueprint exports a comprehensive set of functions and classes for programmatic interaction with TON smart contracts.

### `tonDeepLink`

Generates a TON deep link for transfer.

```typescript
function tonDeepLink(
  address: Address,
  amount: bigint,
  body?: Cell,
  stateInit?: Cell,
  testOnly?: boolean
): string;
```

**Parameters:**
- `address` — The recipient's TON address
- `amount` — The amount of nanoTON to send
- `body` — Optional message body as a Cell
- `stateInit` — Optional state init cell for deploying a contract
- `testOnly` — Optional flag to determine output address format

**Returns:** A URL deep link that can be opened in TON wallets

**Example:**
```typescript
const link = tonDeepLink(myAddress, 10_000_000n); // 0.01 TON
// "ton://transfer/..."
```

### `getExplorerLink`

Generates a link to view a TON address in a selected blockchain explorer.

```typescript
function getExplorerLink(
  address: string,
  network: string,
  explorer: 'tonscan' | 'tonviewer' | 'toncx' | 'dton'
): string;
```

**Parameters:**
- `address` — The TON address to view in explorer
- `network` — The target network (`mainnet` or `testnet`)
- `explorer` — The desired explorer (`tonscan`, `tonviewer`, `toncx`, `dton`)

**Returns:** A full URL pointing to the address in the selected explorer

**Example:**
```typescript
const link = getExplorerLink("EQC...", "testnet", "tonscan");
// "https://testnet.tonscan.org/address/EQC..."
```

### `getNormalizedExtMessageHash`

Generates a normalized hash of an "external-in" message for comparison.

```typescript
function getNormalizedExtMessageHash(message: Message): string;
```

This function ensures consistent hashing of external-in messages by following [TEP-467](https://github.com/ton-blockchain/TEPs/blob/8b3beda2d8611c90ec02a18bec946f5e33a80091/text/0467-normalized-message-hash.md).

**Parameters:**
- `message` — The message to be normalized and hashed (must be of type `"external-in"`)

**Returns:** The hash of the normalized message

**Throws:** Error if the message type is not `"external-in"`

### `compile`

Compiles a contract using the specified configuration for `tact`, `func`, or `tolk` languages.

```typescript
async function compile(name: string, opts?: CompileOpts): Promise<Cell>
```

**Parameters:**
- `name` — The name of the contract to compile (should correspond to a file named `<name>.compile.ts`)
- `opts` — Optional compilation options, including user data passed to hooks

**Returns:** A promise that resolves to the compiled contract code as a `Cell`

**Example:**
```typescript
import { compile } from '@ton/blueprint';

async function main() {
    const codeCell = await compile('Contract');
    console.log('Compiled code BOC:', codeCell.toBoc().toString('base64'));
}
```

### `libraryCellFromCode`

Packs resulting code hash into library cell.

```typescript
function libraryCellFromCode(code: Cell): Cell
```

**Parameters:**
- `code` — The contract code cell

**Returns:** A library cell containing the code hash

### `NetworkProvider`

Interface representing a network provider for interacting with TON blockchain.

```typescript
interface NetworkProvider {
  network(): 'mainnet' | 'testnet' | 'custom';
  explorer(): Explorer;
  sender(): SenderWithSendResult;
  api(): BlueprintTonClient;
  provider(address: Address, init?: { code?: Cell; data?: Cell }): ContractProvider;
  isContractDeployed(address: Address): Promise<boolean>;
  waitForDeploy(address: Address, attempts?: number, sleepDuration?: number): Promise<void>;
  waitForLastTransaction(attempts?: number, sleepDuration?: number): Promise<void>;
  getContractState(address: Address): Promise<ContractState>;
  getConfig(configAddress?: Address): Promise<BlockchainConfig>;
  open<T extends Contract>(contract: T): OpenedContract<T>;
  ui(): UIProvider;
}
```

**Key Methods:**

- `network()` — Returns the current network type
- `sender()` — Returns the sender used for transactions
- `api()` — Returns the underlying TON client API
- `provider()` — Returns a contract provider instance for a given address
- `isContractDeployed()` — Checks whether a contract is deployed
- `waitForDeploy()` — Waits for a contract to be deployed by polling the address
- `waitForLastTransaction()` — Waits for the last transaction to be processed
- `getContractState()` — Retrieves the state of a contract at the specified address
- `getConfig()` — Fetches the current blockchain configuration
- `open()` — Opens a contract instance for interaction
- `ui()` — Returns the UI provider used for writing data to console

#### `UIProvider`

Interface for handling user interactions, such as displaying messages, prompting for input, and managing action prompts.

```typescript
interface UIProvider {
  write(message: string): void;
  prompt(message: string): Promise<boolean>;
  inputAddress(message: string, fallback?: Address): Promise<Address>;
  input(message: string): Promise<string>;
  choose<T>(message: string, choices: T[], display: (v: T) => string): Promise<T>;
  setActionPrompt(message: string): void;
  clearActionPrompt(): void;
}
```

### `CompileOpts`

Optional compilation settings, including user data passed to hooks.

```typescript
type CompileOpts = {
  hookUserData?: any;
  debugInfo?: boolean;
  buildLibrary?: boolean;
};
```

### `CommonCompilerConfig`

Base configuration for all compiler types.

```typescript
type CommonCompilerConfig = {
  preCompileHook?: (params: HookParams) => Promise<void>;
  postCompileHook?: (code: Cell, params: HookParams) => Promise<void>;
  buildLibrary?: boolean;
};
```

### `FuncCompilerConfig`

Configuration for FunC compiler.

```typescript
type FuncCompilerConfig = {
  lang?: 'func';
  optLevel?: number;
  debugInfo?: boolean;
} & (
  | {
      targets: string[];
      sources?: SourceResolver | SourcesMap;
    }
  | {
      targets?: string[];
      sources: SourcesArray;
    }
);
```

### `TolkCompilerConfig`

Configuration for Tolk compiler.

```typescript
type TolkCompilerConfig = {
  lang: 'tolk';
  entrypoint: string;
  optimizationLevel?: number;
  withStackComments?: boolean;
  withSrcLineComments?: boolean;
  experimentalOptions?: string;
};
```

### `TactLegacyCompilerConfig`

Configuration for Tact compiler.

```typescript
type TactLegacyCompilerConfig = {
  lang: 'tact';
  target: string;
  options?: Options;
};
```

## Configuration

For detailed configuration options, refer to the [Blueprint Configuration](/ecosystem/blueprint/config) guide.
